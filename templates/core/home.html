{% extends 'base.html' %}
{% load static %}
{% block title %}Home | My Portfolio{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'home/style.css' %}">
{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="hero">
  <div id="particles-js"></div>
  <div class="hero-content" data-aos="fade-up" data-aos-duration="1500">
    <img src="{{ profile.photo.url }}" alt="{{ profile.full_name }}" class="hero-photo">
    <h1 class="hero-name">{{ profile.full_name }}</h1>
    <h3 class="hero-tagline typewriter">{{ profile.tagline }}</h3>

    <div class="hero-buttons">
      <a href="{% url 'core:contact' %}" class="btn-primary">Contact Me</a>
      <a href="{% url 'core:resume_pdf' %}" class="btn-secondary">Download Resume</a>
    </div>

    <div class="hero-social">
      {% if profile.linkedin %}<a href="{{ profile.linkedin }}" target="_blank"><i class="fab fa-linkedin"></i></a>{% endif %}
      {% if profile.github %}<a href="{{ profile.github }}" target="_blank"><i class="fab fa-github"></i></a>{% endif %}
      {% if profile.website %}<a href="{{ profile.website }}" target="_blank"><i class="fas fa-globe"></i></a>{% endif %}
    </div>
  </div>

  <!-- Hero Floating Shapes -->
  <div class="floating-shapes">
    <div class="shape shape1"></div>
    <div class="shape shape2"></div>
    <div class="shape shape3"></div>
  </div>
</section>

<!-- Animated Wave Divider -->
<svg class="wave-divider" viewBox="0 0 1440 150" preserveAspectRatio="none">
  <path id="wave-path" fill="#90D5FF" fill-opacity="0.8" d="M0,64L1440,32L1440,150L0,150Z"></path>
</svg>

<!-- Skills Section -->
<section class="skills-section" data-aos="fade-up">
  <h2>My Skills</h2>
  <div class="skills-container">
    {% for skill in profile.skills.all %}
    <div class="skill-card" data-aos="zoom-in" data-aos-delay="{{ forloop.counter0|add:'100' }}">
      <h4>{{ skill.name }}</h4>
      <div class="skill-bar">
        <div class="skill-progress" style="width:0%;" data-progress="{{ skill.level }}"></div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

<!-- Projects Section -->
<section class="projects-section" data-aos="fade-up">
  <h2>Featured Projects</h2>
  <div class="projects-grid">
    {% for project in projects %}
    <div class="project-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:'100' }}">
      {% if project.featured_image %}
      <div class="project-img-container">
        <img src="{{ project.featured_image.url }}" alt="{{ project.title }}">
      </div>
      {% endif %}
      <div class="project-content">
        <h4>{{ project.title }}</h4>
        <p>{{ project.summary|truncatechars:120 }}</p>
        <a href="{% url 'projects:project_detail' project.slug %}" class="btn-project">View Project</a>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials-section" data-aos="fade-up">
  <h2>What Clients Say</h2>
  <div class="testimonials-grid">
    {% for testimonial in testimonials %}
    <div class="testimonial-card" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:'100' }}">
      {% if testimonial.photo %}
      <div class="testimonial-photo-container">
        <img src="{{ testimonial.photo.url }}" alt="{{ testimonial.client_name }}" class="testimonial-photo">
      </div>
      {% endif %}
      <p class="testimonial-content">“{{ testimonial.content|truncatechars:180 }}”</p>
      <h5 class="testimonial-name">{{ testimonial.client_name }}</h5>
      {% if testimonial.role %}
      <p class="testimonial-role">{{ testimonial.role }}</p>
      {% endif %}
    </div>
    {% endfor %}
  </div>

<!-- View More Button -->
<div class="btn-more-container">
  <a href="{% url 'core:testimonials' %}" class="btn-more">View More Testimonials</a>
</div>



{% endblock %}

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/particles.js"></script>

<script>
  // Initialize AOS
  AOS.init({ duration: 1200, once: true });

  // Particles.js Config
  particlesJS("particles-js", {
    particles: {
      number: { value: 60 },
      color: { value: "#ffffff" },
      shape: { type: "circle" },
      opacity: { value: 0.5 },
      size: { value: 3 },
      line_linked: { enable: true, distance: 150, color: "#ffffff", opacity: 0.4, width: 1 },
      move: { enable: true, speed: 3 }
    },
    interactivity: {
      detect_on: "canvas",
      events: {
        onhover: { enable: true, mode: "repulse" },
        onclick: { enable: true, mode: "push" }
      }
    }
  });

  // Typewriter Fix (preserves spaces)
  const typewriter = document.querySelector('.typewriter');
  if (typewriter) {
    let txt = typewriter.innerText;
    typewriter.innerText = '';
    let i = 0;
    const type = () => {
      if (i < txt.length) {
        typewriter.innerHTML += txt.charAt(i) === ' ' ? '&nbsp;' : txt.charAt(i);
        i++;
        setTimeout(type, 80);
      }
    };
    type();
  }

  // Skill Bar Animations
  document.querySelectorAll('.skill-progress').forEach(bar => {
    let width = bar.getAttribute('data-progress');
    setTimeout(() => { bar.style.width = width + '%'; }, 500);
  });

  // Animated Wave
  const wave = document.getElementById('wave-path');
  let waveOffset = 0;
  function animateWave() {
    waveOffset += 0.5;
    wave.setAttribute('d', `M0,64 C360,${50 + 10 * Math.sin(waveOffset / 10)},1080,${64 + 10 * Math.cos(waveOffset / 10)},1440,32 L1440,150 L0,150 Z`);
    requestAnimationFrame(animateWave);
  }
  animateWave();
</script>
{% endblock %}
